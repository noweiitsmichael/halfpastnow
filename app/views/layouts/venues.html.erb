<!DOCTYPE html>
<html>
<head>
  <title>half past now.</title>
  
  <%= javascript_include_tag "application" %>
  <%= javascript_include_tag "jquery-ui" %>
  <%= javascript_include_tag "jquery.validate" %>
  <%= javascript_include_tag "jquery.form" %>
  <%= javascript_include_tag "jquery.tabSlideOut.v1.3" %>
  <%= stylesheet_link_tag "styles" %>
  <%= stylesheet_link_tag "venue" %>
  <%= stylesheet_link_tag "jquery-ui" %>
  <%= csrf_meta_tags %>
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCuX99Cn10qLVF0AQNRzduy012YqkaIXgk&sensor=false"></script>
</head>
<body onload="if(typeof initialize !== 'undefined') initialize();">
<script type="text/javascript">
  var validators = {};

  function generateValidator(selector, options) {
    options = options || {};

    if(options["ajax"] == true) {
      validators[selector] = $(selector).validate(
            { submitHandler: function(form) {
              // do nothing
              } 
          }); 

      $(selector).submit(function() { 
            var obj = $(this);
            $(this).find("[type='submit']").after("<img src='/assets/admin-load.gif' class='form-load'/>");
            obj.ajaxSubmit({
                beforeSubmit: function() {
                                return validators[selector].numberOfInvalids() == 0;
                              },
                success: function() {
                          // obj.remove();
                          obj.find('.form-load').remove();
                          obj.slideUp();
                        }
            }); 
            return false; 
      });
    } else {
      validators[selector] = $(selector).validate();
    }
  }
</script>

<script type="text/javascript">
  $(function(){
      $('.slide-out-div').tabSlideOut({
          tabHandle: '.handle',                     //class of the element that will become your tab
          pathToTabImage: 'assets/feedback_tab_v.jpg', //path to the image for the tab //Optionally can be set using css
          imageHeight: '122px',                     //height of tab image           //Optionally can be set using css
          imageWidth: '40px',                       //width of tab image            //Optionally can be set using css
      });

  });

</script>

<%= yield %>

<div class="slide-out-div">
	<a class="handle" href="http://link-for-non-js-users.html">Content</a>
	<h3>Got some feedback?</h3>
	<p>Let us know! We really appreciate it.</p>
	<%= render 'feedbacks/form' %>
</div>


</body>
</html>
